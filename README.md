# zygosity-report-tool
This tool is used to pull information from Kraken and auto-generate a report that gives zygosity % for each sample in the file

How to use the tool:

All information from Kraken will be put into a database, in this case using sqlite database because of its native library in python 2.7.  Go through the following steps to get the information from Kraken into the databse to be used for report generation.

1.  Create the zygosity database (zygodb.sqlite):  Run the zygodb.py program, and it will create the zygosity database complete with 2 tables (zygosity and raw_data).  This uses the QC number as a primary key (must be unique).  The zygosity table will house the % homo/hemi/null for each assay run on a sample (QC#), and the raw_data table will house the amount of data points for each assay which can be useful for metrics.
2.  Create a table in the zygosity database (zygodb.sqlite) named details.  This is the info received from the operations group that indicates the batch #, Inspection Lot # and short text of details on that sample.  using the database view in the qc sample sharepoint, export the newest version when generating a report, naming it sharepoint.csv.  Run the program detailsDB.py to insert (or ignore if QC# has been input already) the information into the database.
3.  Convert the format from Kraken into the proper QC# orientation.  To save time in creating Kraken studies, the master plates are given generic names (ex. Project 1A - Project 10H).  running the program convertqc.py you will be prompted with a raw_input command asking which file to run (just type name, and not name.csv).  Type the name of the csv file and the program replaces the generic 'Project X' naming structure with the actual QC# given to the sample in the column named 'Box'.  It will save the new format as a CSV file with the QC# as the naming structure (ie. QC - YYYY - ###.csv).  If there are multiple QC samples in the file it will save each independently as csv files, all using the QC# naming structure.
4.  Calculate the zygosity % for each assay in a specified file and insert into the zygodb.sqlite database.  Running the program zygoavg.py you will be prompted with a raw_input for the file name you wish to analyze (just type name of file, not name.csv).  Whatever file you choose will analyze the %homo/hemi/null calls for each assay in the file, and insert (or replace if the QC# already exists in the database) that information into the zygosity table in the zygodb.sqlite database.  It will also insert or replace (if QC# already exists) the counts (or data points) for each assay into the raw_data table in the database.  The QC# is the primary key and must be unique.

